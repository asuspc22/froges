"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatRuntimeLogArgs = exports.formatRuntimeLogLevel = void 0;
const log_color_1 = require("./log-color");
const util_1 = require("util");
function formatRuntimeLogLevel(level) {
    switch (level) {
        case 10:
        case '10':
        case 'TRACE':
            return log_color_1.RuntimeLogLevel.trace;
        case 20:
        case '20':
        case 'DEBUG':
            return log_color_1.RuntimeLogLevel.debug;
        case 30:
        case '30':
        case 'INFO':
            return log_color_1.RuntimeLogLevel.info;
        case 40:
        case '40':
        case 'WARN':
        case 'WARNING':
            return log_color_1.RuntimeLogLevel.warn;
        case 50:
        case '50':
        case 'ERROR':
            return log_color_1.RuntimeLogLevel.error;
        case 60:
        case '60':
        case 'FATAL':
            return log_color_1.RuntimeLogLevel.fatal;
        default:
            return log_color_1.RuntimeLogLevel.info;
    }
}
exports.formatRuntimeLogLevel = formatRuntimeLogLevel;
function formatIfFunctionError(arg) {
    if (arg && arg.name) {
        if (arg.name === 'FUNCTION_ERR') {
            if (arg.stack) {
                return `${arg.message}\n${arg.stack}`;
            }
            return arg.message;
        }
        if (arg.message && arg.stack) {
            return `${arg.name}: ${arg.message}`;
        }
    }
    return arg;
}
function formatRuntimeLogArgs(args) {
    const string = (0, util_1.format)(...args.map(formatIfFunctionError));
    const formattedString = `${string.match(/[{[]]\n.+/) ? '\n' : ''}${string}`;
    return formattedString;
}
exports.formatRuntimeLogArgs = formatRuntimeLogArgs;
