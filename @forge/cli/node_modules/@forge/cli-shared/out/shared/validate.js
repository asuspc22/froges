"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateSite = void 0;
const url_1 = require("url");
const ui_1 = require("../ui");
const error_handling_1 = require("./error-handling");
const product_1 = require("./product");
const validateSite = (site, product) => {
    const trySites = [site, `https://${site}`];
    for (const trySite of trySites) {
        try {
            const urlObj = new url_1.URL(trySite);
            if (product && (0, product_1.isWorkspaceProduct)(product)) {
                return urlObj;
            }
            urlObj.pathname = '/';
            return urlObj;
        }
        catch (_a) {
        }
    }
    throw new error_handling_1.ValidationError(ui_1.Text.error.invalidSite);
};
exports.validateSite = validateSite;
